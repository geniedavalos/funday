<app-loading *ngIf="!finishedLoading"></app-loading>
    <section *ngIf="finishedLoading">
      <div class="mx-2 row justify-content-between">
        <h2 class="d-inline">{{task?.title}} <span style="font-size: 1.2rem;">(Due: {{task?.dueDate| date:"mediumDate"}})</span></h2>
        <a (click)="backClicked()">Go Back</a>
      </div>
      <p class="border rounded">Task Details: {{task?.description}}</p>
      <div class="progress">
        <div class="progress-bar progress-bar-striped" role="progressbar" [ngStyle]="{'width': task?.progress+'%'}" aria-valuenow="10">{{task?.progress}}%
        </div>
      </div>
      <div class='row mt-3'>
        <button type="button" class="btn btn-info mx-auto" data-toggle="modal" data-target="#updateProgress">Update Progress</button>
      </div>

      <div class="modal fade" id="updateProgress" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                  <div class="modal-header text-center bg-info">
                      <h3 class="modal-title w-100  my-auto text-white">Update Progress</h3>
                      <button type="button" class="close text-white my-auto" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
                  <div class="modal-body">

                      <p class='text-center'><strong>Enter your progress below</strong></p>
                      <p class='text-center'>Current Progress</p>
                      <div class="progress mb-2 col-8 mx-auto p-0">
                        <div class="progress-bar progress-bar-striped bg-success" role="progressbar" [ngStyle]="{'width': updateProgress+'%'}" [ngClass]="{'bg-success': updateProgress > 74, 'bg-warning': updateProgress < 75 }" aria-valuenow='5' aria-valuemin='0' aria-valuemax='100'>{{ updateProgress }}%</div>

                      </div>
                      <div class='input-group mb-2 justify-content-center mt-3'>
                      <input type='number' max="100" min="0" class='form-control col-1' name='progress' [(ngModel)]='updateProgress'>
                      <div class='input-group-append'>
                        <span class="input-group-text" id="basic-addon1"><i class="fa fa-percent" aria-hidden="true"></i></span>
                      </div>
                      </div>

                  </div>
                  <div class="modal-footer justify-content-center">
                      <button type="button" data-dismiss="modal" (click)='onProgressUpdate()' class="btn btn-info">Update</button>
                  </div>
              </div>
          </div>
      </div>

    </section>

    <section *ngIf="finishedLoading">
      <h2>Team Members</h2>
      <span class='badge badge-info mx-1 px-2' *ngFor="let member of task?.teamMembers" ><a class='text-white' [routerLink]="['/employee',member._id,'detail']">{{member.firstName}} {{member.lastName}}</a></span>

    </section>

    <section *ngIf="finishedLoading">
      <h2>Notes</h2>
      <div class="notes my-4 py-0 px-1">
        <p class="my-0" *ngFor="let note of notes">({{note.createdAt| date:"medium"}}) {{note.sender.firstName}} {{note.sender.lastName}} : {{note.content}} </p>

      </div>
      <textarea minlength="1" rows='2' #content="ngModel" required class='form-control' id="content" name="content" [(ngModel)]='newNote.content'>
      </textarea>
      <br>
      <div class='row'>
        <button [disabled]="(!content.valid)"  type="button" (click)='onAddNote()' class="btn btn-success mx-auto">Add Note</button>
      </div>

    </section>
